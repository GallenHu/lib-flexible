!function(a,b){function c(){var b=g.getBoundingClientRect().width;b/j>540&&(b=540*j);var c=b/10;g.style.fontSize=c+"px",l.rem=a.rem=c}function d(){return m}var e,f=a.document,g=f.documentElement,h=f.querySelector('meta[name="viewport"]'),i=f.querySelector('meta[name="flexible"]'),j=0,k=0,l=b.flexible||(b.flexible={}),m=!0;if(h){console.warn("将根据已有的meta标签来设置缩放比例");var n=h.getAttribute("content").match(/initial\-scale=([\d\.]+)/);n&&(k=parseFloat(n[1]),j=parseInt(1/k))}else if(i){var o=i.getAttribute("content");if(o){var p=o.match(/initial\-dpr=([\d\.]+)/),q=o.match(/maximum\-dpr=([\d\.]+)/);p&&(j=parseFloat(p[1]),k=parseFloat((1/j).toFixed(2))),q&&(j=parseFloat(q[1]),k=parseFloat((1/j).toFixed(2)))}}if(!j&&!k){var r=(a.navigator.appVersion.match(/android/gi),a.navigator.appVersion.match(/iphone/gi)),s=a.devicePixelRatio;j=r?s>=3&&(!j||j>=3)?3:s>=2&&(!j||j>=2)?2:1:1,k=1/j}if(g.setAttribute("data-dpr",j),!h)if(h=f.createElement("meta"),h.setAttribute("name","viewport"),h.setAttribute("content","initial-scale="+k+", maximum-scale="+k+", minimum-scale="+k+", user-scalable=no"),g.firstElementChild)g.firstElementChild.appendChild(h);else{var t=f.createElement("div");t.appendChild(h),f.write(t.innerHTML)}a.addEventListener("resize",function(){d()&&(clearTimeout(e),e=setTimeout(c,300))},!1),a.addEventListener("pageshow",function(a){a.persisted&&(clearTimeout(e),e=setTimeout(c,300))},!1),"complete"===f.readyState?f.body.style.fontSize=12*j+"px":f.addEventListener("DOMContentLoaded",function(a){f.body.style.fontSize=12*j+"px"},!1),c(),l.dpr=a.dpr=j,l.refreshRem=c,l.rem2px=function(a){var b=parseFloat(a)*this.rem;return"string"==typeof a&&a.match(/rem$/)&&(b+="px"),b},l.px2rem=function(a){var b=parseFloat(a)/this.rem;return"string"==typeof a&&a.match(/px$/)&&(b+="rem"),b},l.setAllowRefreshRemOnResize=function(a){m=Boolean(a)}}(window,window.lib||(window.lib={}));